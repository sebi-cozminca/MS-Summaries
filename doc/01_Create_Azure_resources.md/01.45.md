---
title: '45: Integrate Azure Kubernetes Service apps with Active Directory (Catalog Dev)` 
layout: default
nav_order: 45
parent: 'Lab summaries'
--- 

# Lab Metadata & Summary

**ID** 191962  
**Number:** LAB348  
**Name:** Integrate Azure Kubernetes Service apps with Active Directory (Catalog Dev)  
**CloudSubscriptionPoolName:** Microsoft Event Subscription (CSS)  
**AllowSave:** False  
**CloudCredentialPoolAssignments:** LAB348: Integrate Azure Kubernetes, Register-AzResourceProvider Microsoft.ContainerService, Time sync, Create-InitialAzureResources, "gmsarg"
                                                   $RG_Location = '@lab.CloudResourceGroup(ResourceGroup1).Location'
                                                   New-AzResourceGroup -Name $RG_Name -Location $RG_Location | Out-Null
                                                   
                                                   #Creates Azure vNet
                                                   $vNet_Name = 'gmsavnet'
                                                   $vnet = @, $vNet_Name
                                                       ResourceGroupName = $RG_Name
                                                       Location = $RG_Location
                                                       AddressPrefix = '10.0.0.0/16', 'gmsasubnet'
                                                   $subnet = @, $Subnet_Name
                                                       VirtualNetwork = $virtualNetwork
                                                       AddressPrefix = '10.0.0.0/24', Create-AKSCluster, "gmsarg"
                                                   $RG_Location = '@lab.CloudResourceGroup(ResourceGroup1).Location'
                                                   $vNet_Name = 'gmsavnet'
                                                   $Subnet_Name = 'gmsasubnet'
                                                   
                                                   #Creates AKS Cluster using the vNet created previously
                                                   $AKSCluster_Name = 'GMSAAKS'
                                                   $subnetid = az network vnet show --name $vNet_Name --resource-group $RG_Name --query "subnets[0, 'wspool'
                                                   az aks nodepool add --resource-group $RG_Name --cluster-name $AKSCluster_Name --name $AKSPool_Name --node-vm-size Standard_D2s_v3 --os-type Windows --node-count 1 --no-wait  
**Additional licenses:** NA  

---

## Exercise Summary
### Exercise Summary
- **Overview:** Understand gMSA with AKS, required components, and configuration flow.
- **Setup:** Verify pre-provisioned resources (AKS cluster, VNet, Key Vault, Domain Controller).
- **Action:** Connect to DC01 VM, install AksGMSA PowerShell module, authenticate with Azure CLI.
- **Configuration:** Provide environment parameters (AKS cluster, AD details, gMSA user/pass).
- **Validation:** Import AKS credentials, run `kubectl get nodes`, confirm gMSA integration.

