---
title: '04: Lab 4'
layout: default
nav_order: 4
parent: 'Group 01: title goes here'
---

# Lab 4

41-411-2 – TechLab: Training AI Models on Azure VMs using Azure CycleCloud SLURM Workspace [Parent] – Overview

## Lab Configuration
- **Number:** 41-411-2
- **Name:** TechLab: Training AI Models on Azure VMs using Azure CycleCloud SLURM Workspace [Parent]
- **CloudSubscriptionPoolName:** CycleCloud CSS (Recycling)
- **AllowSave:** False
- **CloudCredentialPoolAssignments:** NA
- **Additional licenses:** NA

## Lab Exercises

### Exercise 1: Deploy Slurm Workspace using a marketplace image
- **Task 1 – Create an SSH key for deployment:** Sign in to VM, open Azure Portal, create new SSH key (SlurmWorkspaceKey), download private key.  
- **Task 2 – Deploy Azure CycleCloud Workspace for Slurm from Marketplace:** Search Marketplace, select Slurm template, configure Basics, Networking, Slurm, Partition settings.  
- **Task 3 – Install Azure CLI:** Download MSI installer on the VM, install CLI, accept license.  
- **Task 4 – Install Azure Bastion extension:** Run az login, ensure Bastion extension is installed for secure cluster VM connections.  

### Exercise 2: Configure and Validate Cluster
- **Task 1 – Configure cluster partitions:** HTC, HPC, GPU partitions with specified SKUs (F2s_v2, HB120rs_v3, NC24s_v3).  
- **Task 2 – Validate configuration:** Use Azure CLI to check CycleCloud deployment and cluster status.  
- **Task 3 – Connect to cluster nodes using Bastion and verify Slurm scheduler is active.  

### Exercise 3: Train AI model using DistilBERT
- **Task 1 – Upload data and model scripts to cluster.**  
- **Task 2 – Submit Slurm job for training/inference with DistilBERT model on movie reviews dataset.**  
- **Task 3 – Monitor job progress and check logs/output.**  

### Exercise 4: Benchmark and Scale Cluster
- **Task 1 – Run benchmark tests on GPU nodes.**  
- **Task 2 – Add additional compute nodes to scale training workload.**  
- **Task 3 – Use Azure Monitor and dashboards to view resource usage and training performance.**  