---
title: '32: Ethical Hacking with AKS: Hands-On Attack and Defense Strategies (Catalog Dev)'
layout: default
nav_order: 32
parent: 'Lab summaries'
--- 

# Lab Metadata & Summary

**ID** 191957  
**Number:** LAB346  
**Name:** Ethical Hacking with AKS: Hands-On Attack and Defense Strategies (Catalog Dev)  
**CloudSubscriptionPoolName:** Microsoft Event Subscription (CSS)  
**AllowSave:** False  
**CloudCredentialPoolAssignments:** LAB346: Ethical Hacking with AKS v3, AZD Install, Register Resource Provider, Git Clone, Bicep Deploy, "vnet@lab.LabInstance.Id"
                                                   $subnetName        = "subnet@lab.LabInstance.Id"
                                                   $aksClusterName    = "aks@lab.LabInstance.Id"
                                                   $acrName           = "acr@lab.LabInstance.Id"
                                                   $userIP            = Invoke-RestMethod -Uri "https://api.ipify.org"
                                                   
                                                   # Optional/defaults (keep same as your CLI version)
                                                   $vnetAddressPrefix = "10.224.0.0/12"
                                                   $subnetPrefix      = "10.224.0.0/16"
                                                   $aksNodeCount      = 1
                                                   $aksNodeSize       = "Standard_D2_v3"
                                                   $aksAdminUsername  = "azureuser"
                                                   
                                                   # -----------------------
                                                   # Authenticate & Context
                                                   # -----------------------
                                                   $appID = "@lab.CloudSubscription.AppId"
                                                   $secret = "@lab.CloudSubscription.AppSecret"
                                                   $tenID = "@lab.CloudSubscription.TenantId"
                                                   $subId = "@lab.CloudSubscription.Id"
                                                   
                                                   $secureSecret = ConvertTo-SecureString $secret -AsPlainText -Force
                                                   $spCred = New-Object System.Management.Automation.PSCredential($appID, $secureSecret)
                                                   
                                                   # Sign in as Service Principal and set subscription context
                                                   Connect-AzAccount -ServicePrincipal -Tenant $tenID -Credential $spCred -Subscription $subId -SkipContextPopulation -ErrorAction Stop | Out-Null
                                                   
                                                   # -----------------------
                                                   # Build parameter object
                                                   # -----------------------
                                                   $paramObject = @, $vnetName
                                                     vnetAddressPrefix = $vnetAddressPrefix
                                                     subnetName        = $subnetName
                                                     subnetPrefix      = $subnetPrefix
                                                     aksClusterName    = $aksClusterName
                                                     acrName           = $acrName
                                                     aksNodeCount      = $aksNodeCount
                                                     aksNodeSize       = $aksNodeSize
                                                     aksAdminUsername  = $aksAdminUsername
                                                     sshPublicKey      = $sshPublicKey
                                                     userIP            = $userIP  
**Additional licenses:** NA  

---

## Exercise Summary
### Exercise Summary
- **Setup:** Provision AKS cluster, clone AKS-CTF repo, deploy insecure app.
- **Scenario 1 Attack:** Exploit app via dictionary attack, crash page → extract credentials → escalate with kubectl → deploy cryptominer & SSH backdoor.
- **Scenario 1 Defense:** Blue team investigates cluster, identifies high CPU pod (`bitcoinero`), mitigates unauthorized workload.
- **Outcome:** Learn attacker vs defender workflow for Kubernetes security.

